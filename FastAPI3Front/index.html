<!doctype html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <title>Sistema</title>
    
  </head>

  <body>
    
    <script>
      function cadastrese() {
  
        var nome = document.getElementById('nome').value;
        var usr = document.getElementById('usr').value;
        var senha = document.getElementById('senha').value;
        urle = "http://127.0.0.1:8000/cadastro?nome=" + nome + "&usr=" + usr + "&senha=" + senha
  
        $.ajax({
            url: urle,
            method: 'post',
            success: function(resposta) {
                console.log(resposta)
  
                if (Object.values(resposta) == 0) {
                    var resultado = document.getElementById("resultado")
                    resultado.innerHTML = '<div id="resultado" class= "alert alert-success" role="alert" style="text-align:center">Cadastro realizado com sucesso!</div>'
                    
                }
  
                if (Object.values(resposta) == 2) {
                    var resultado = document.getElementById("resultado")
                    resultado.innerHTML = '<div id="resultado" class= "alert alert-danger" role="alert" style="text-align:center">Usuario já cadastrado!</div>'
  
                }
  
  
            }
        })
  
  
      }
  
        function logar() {
  
          var usr_login = document.getElementById('usr_login').value;
          var senha_login = document.getElementById('senha_login').value;
          urle = "http://127.0.0.1:8000/login?usr=" + usr_login + "&senha=" + senha_login
    
          $.ajax({
              url: urle,
              method: 'post',
              success: function(resposta) {
                  console.log(resposta)
    
                  if (Object.values(resposta) == 0) {
                      var resultado_login = document.getElementById("resultado_login")
                      resultado_login.innerHTML = '<div id="resultado" class= "alert alert-success" role="alert" style="text-align:center">Login realizado com sucesso!</div>'
    
                  }
    
                  if (Object.values(resposta) == 5) {
                      var resultado_login = document.getElementById("resultado_login")
                      resultado_login.innerHTML = '<div id="resultado" class= "alert alert-danger" role="alert" style="text-align:center">Usuario inexistente!</div>'
    
                  }
              }
          })
        }
  
        function myFunction1() {
  
          var x = document.getElementById("myDIV1");
          var y = document.getElementById("myDIV2");
    
          if (x.style.display === "none") {
              y.style.display = "none";
              x.style.display = "block";
    
          }
        }
  
        function myFunction2() {
  
          var x = document.getElementById("myDIV1");
          var y = document.getElementById("myDIV2");
    
          if (y.style.display === "none") {
              x.style.display = "none";
              y.style.display = "block";
    
          }
        }

    </script>

    <br>
    <br>
    <div class="container" >
      <div class="row">

        <div class="col-sm"></div>
        <div  class="col-sm">
          <button onclick="myFunction1()" class="btn btn-success" style="width: 250px;" >Cadastrar</button>

        </div>
        <div class="col-sm">

          <button onclick="myFunction2()" class="btn btn-success" style="width: 250px;">Logar</button>

        </div>
        <div class="col-sm"></div>
      </div>

    </div>

    <br>
    <br>
    <div id="myDIV1" class="container" >
      <div class="row ">
          <div class="col-sm">
            <div style = "text-align:center " class="col-sm">
              <h1>Cadastre-se</h1>
            </div>
            <div>
              <div class="form-group col-sm"  >
                <p>Nome:</p>
                <input type="text" class="form-control" id="nome"  placeholder="Nome">
                <br>
                <p>Usuário:</p>
                <input type="text" class="form-control" id="usr"  placeholder="Usuário">
                <br>
                <p>Senha:</p>
                <input type="password" class="form-control" id="senha" placeholder="Senha">
                <br>
                <button onclick = "cadastrese()" class="btn btn-success" >Cadastrar</button>
              </div>
            </div>
          </div>
      </div>

      <div class="row" >
        <div class="col-sm"></div>
        <div id = resultado  class="col-sm"></div>
        <div class="col-sm"></div>
      </div>

    </div>

    <br>
    <div id="myDIV2" style="display: none;" class="container" >
      <div class="row ">
          <div class="col-sm">
            <div style = "text-align:center " class="col-sm">
              <h1>Login</h1>
            </div>
            <div>
              <div class="form-group col-sm"  >
                <br>
                <p>Usuário:</p>
                <input type="text" class="form-control" id="usr_login"  placeholder="Usuário">
                <br>
                <p>Senha:</p>
                <input type="password" class="form-control" id="senha_login" placeholder="Senha">
                <br>
                <button onclick = "logar()" class="btn btn-primary" >Logar</button>
              </div>
            </div>
          </div>
      </div>

      <div class="row" >
        <div class="col-sm"></div>
        <div id = resultado_login  class="col-sm"></div>
        <div class="col-sm"></div>
      </div>

    </div>

  </body>
</html>